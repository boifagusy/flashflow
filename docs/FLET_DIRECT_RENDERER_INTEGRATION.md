# FlashFlow Engine Integration with Laravel, FranklinPHP, Go, and FastHTTP

This document explains how the FlashFlow Engine integrates with the FlashFlow technology stack comprising Laravel, FranklinPHP, Go, and FastHTTP. The engine uses Flet as the underlying UI framework.

## Architecture Overview

The FlashFlow Engine works as a complementary service that can coexist with the Laravel backend generated by FlashFlow. The integration follows this architecture:

```
┌─────────────────┐    ┌──────────────────────┐    ┌──────────────────┐
│   Flet Client   │◄──►│  FlashFlow Engine    │◄──►│ Laravel Backend  │
└─────────────────┘    └──────────────────────┘    └──────────────────┘
                            │                           │
                            ▼                           ▼
                    ┌───────────────┐         ┌──────────────────────┐
                    │ Python/Flet   │         │ FranklinPHP/Go       │
                    └───────────────┘         └──────────────────────┘
```

## Integration Points

### 1. API Communication
The FlashFlow Engine communicates with the Laravel backend through RESTful APIs:

- **GET requests** for retrieving data
- **POST requests** for creating new records
- **PUT requests** for updating existing records
- **DELETE requests** for removing records

### 2. Configuration
The engine accepts a backend URL parameter that points to the Laravel application:

```bash
# Command line usage
python main.py /path/to/project http://localhost:8000

# Or through the CLI wrapper
flashflow flet-direct-render --backend http://localhost:8000
```

### 3. Component Actions
Flet components can trigger API calls through action definitions in .flow files. The engine uses Flet as the underlying UI framework:

```yaml
component: "button"
text: "Create User"
action: "api_call"
method: "POST"
endpoint: "/api/users"
data:
  name: "John Doe"
  email: "john@example.com"
```

## Technology Stack Integration

### Laravel Backend
- The Laravel application serves as the backend API provider
- Handles database operations, business logic, and authentication
- Provides RESTful endpoints that the FlashFlow Engine can consume

### FranklinPHP
- Serves the Laravel application with high performance
- Can be configured with GoFastHTTP for even better performance
- Provides automatic HTTPS and HTTP/2 support

### Go Services
- The CLI wrapper is written in Go for optimal performance
- Manages the execution of the Flet Direct Renderer
- Handles process management and system integration

### FastHTTP (GoFastHTTP)
- Optional high-performance HTTP engine for FranklinPHP
- Provides better concurrency handling than standard HTTP servers
- Can be enabled through configuration

## Deployment Scenarios

### 1. Development Mode
In development, both services can run simultaneously:

```bash
# Start Laravel backend with FranklinPHP
flashflow serve --all

# In another terminal, start FlashFlow Engine
flashflow flashflow-engine
```

### 2. Production Deployment
In production, the services can be deployed together:

1. **Containerized Deployment**: Both services run in separate containers managed by Docker Compose
2. **Single Server**: Both services run on the same server with process management
3. **Separate Servers**: Services deployed on different servers with proper networking

## Benefits of This Integration

1. **Rapid Development**: Direct rendering without build steps
2. **Technology Flexibility**: Best of both Python/Flet and PHP/Laravel
3. **Performance**: Go-based services and GoFastHTTP for high concurrency
4. **Scalability**: Easy horizontal scaling with containerization
5. **Deployment Options**: Multiple deployment strategies for different environments

## Example Usage

### .flow File with API Integration
```yaml
page:
  title: "User Management"
  path: "/users"
  body:
    - component: "button"
      text: "Load Users"
      action: "api_call"
      method: "GET"
      endpoint: "/api/users"
    - component: "button"
      text: "Create User"
      action: "api_call"
      method: "POST"
      endpoint: "/api/users"
      data:
        name: "{{user_name}}"
        email: "{{user_email}}"
```

### Starting the Integrated System
```bash
# Generate the application
flashflow build

# Start the backend
flashflow serve --all

# In another terminal, start the FlashFlow Engine
flashflow flashflow-engine --backend http://localhost:8000
```

The FlashFlow Engine will be available at http://localhost:8012 and will communicate with the Laravel backend at http://localhost:8000.